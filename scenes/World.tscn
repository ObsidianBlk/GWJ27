[gd_scene load_steps=12 format=2]

[ext_resource path="res://objects/tilesets/Tilesets.tres" type="TileSet" id=1]
[ext_resource path="res://objects/ui/dialogbox/DialogBox.tscn" type="PackedScene" id=2]
[ext_resource path="res://objects/player/Player.tscn" type="PackedScene" id=3]
[ext_resource path="res://objects/camera/Camera.tscn" type="PackedScene" id=4]
[ext_resource path="res://scenes/DialogTrigger.gd" type="Script" id=5]
[ext_resource path="res://assets/graphics/effects/light_a.png" type="Texture" id=6]
[ext_resource path="res://objects/page/Page.tscn" type="PackedScene" id=7]
[ext_resource path="res://objects/foliage/FoliageSpawner.tscn" type="PackedScene" id=8]

[sub_resource type="CircleShape2D" id=1]

[sub_resource type="Shader" id=2]
code = "shader_type canvas_item;

uniform vec4 color : hint_color = vec4(0.0, 0.0, 0.0, 1.0);

void fragment(){
	COLOR = color;
}"

[sub_resource type="ShaderMaterial" id=3]
shader = SubResource( 2 )
shader_param/color = Color( 0, 0, 0, 1 )

[node name="World" type="Node2D"]

[node name="UI" type="CanvasLayer" parent="."]

[node name="DialogBox" parent="UI" instance=ExtResource( 2 )]

[node name="TileMap" type="TileMap" parent="."]
tile_set = ExtResource( 1 )
format = 1
tile_data = PoolIntArray( -458751, 0, 0, -458750, 0, 2, -393215, 0, 65536, -393214, 0, 65538, -327679, 0, 65536, -327678, 0, 65538, -262143, 0, 65536, -262142, 0, 65538, -196607, 0, 65536, -196606, 0, 65538, -196592, 0, 196608, -196591, 0, 196609, -196590, 0, 196609, -196589, 0, 196609, -196588, 0, 5, -131071, 0, 131072, -131070, 0, 65544, -131069, 0, 196609, -131068, 0, 196609, -131067, 0, 196609, -131066, 0, 196609, -131065, 0, 196609, -131064, 0, 196609, -131063, 0, 196610, -131052, 0, 65539, -65516, 0, 65539, 65534, 0, 196608, 65535, 0, 196609, 0, 0, 196609, 1, 0, 5, 13, 0, 196608, 14, 0, 196609, 15, 0, 196609, 16, 0, 196610, 20, 0, 65539, 65537, 0, 65539, 65555, 0, 0, 65556, 0, 65543, 131073, 0, 65540, 131074, 0, 196609, 131075, 0, 196609, 131076, 0, 196609, 131077, 0, 196609, 131078, 0, 9, 131079, 0, 1, 131080, 0, 2, 131090, 0, 4, 131091, 0, 65545, 131092, 0, 131074, 196614, 0, 131072, 196615, 0, 131079, 196616, 0, 65538, 196621, 0, 0, 196622, 0, 1, 196623, 0, 1, 196624, 0, 8, 196625, 0, 196609, 196626, 0, 65541, 262151, 0, 65536, 262152, 0, 65538, 262156, 0, 0, 262157, 0, 196615, 262158, 0, 131078, 262159, 0, 131073, 262160, 0, 131074, 327687, 0, 65536, 327688, 0, 65538, 327691, 0, 0, 327692, 0, 196615, 327693, 0, 65537, 327694, 0, 65538, 393223, 0, 131072, 393224, 0, 65544, 393225, 0, 196609, 393226, 0, 196609, 393227, 0, 65545, 393228, 0, 131073, 393229, 0, 131073, 393230, 0, 131074 )

[node name="DialogTrigger" type="Area2D" parent="."]
position = Vector2( 1250.74, 13.3484 )
script = ExtResource( 5 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="DialogTrigger"]
shape = SubResource( 1 )

[node name="GrassCluster" type="Node2D" parent="."]

[node name="FoliageSpawner" parent="." instance=ExtResource( 8 )]
position = Vector2( 203.939, -125.057 )
area = 410.0
anchor = 2
bg_y_offset = 2.0
bg_container_path = NodePath("../GrassCluster")
fg_container_path = NodePath("../GrassCluster2")
grow_rate = 0.5
spread = 0.755
variance = 0.66
grass_color = Color( 0.647059, 0.839216, 0.333333, 1 )

[node name="Player" parent="." instance=ExtResource( 3 )]
position = Vector2( 254.986, -335.505 )

[node name="Camera" parent="." instance=ExtResource( 4 )]
current = true
target_path = NodePath("../Player")

[node name="GrassCluster2" type="Node2D" parent="."]
position = Vector2( -3.77972, 11.3393 )

[node name="Page" parent="." instance=ExtResource( 7 )]
position = Vector2( 425.889, -142.506 )

[node name="Page2" parent="." instance=ExtResource( 7 )]
position = Vector2( 891.35, -8.40894 )

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color( 0, 0, 0, 1 )

[node name="Background" type="CanvasLayer" parent="."]
follow_viewport_enable = true

[node name="ParallaxBackground" type="ParallaxBackground" parent="Background"]

[node name="ParallaxLayer" type="ParallaxLayer" parent="Background/ParallaxBackground"]
motion_mirroring = Vector2( 1024, 640 )

[node name="Sprite" type="Sprite" parent="Background/ParallaxBackground/ParallaxLayer"]
modulate = Color( 0.988235, 0.988235, 0.988235, 1 )
material = SubResource( 3 )
scale = Vector2( 8, 5 )
texture = ExtResource( 6 )
centered = false
[connection signal="disable_input" from="UI/DialogBox" to="Player" method="_on_input_disable"]
[connection signal="enable_input" from="UI/DialogBox" to="Player" method="_on_input_enable"]
[connection signal="body_entered" from="DialogTrigger" to="DialogTrigger" method="_on_DialogTrigger_body_entered" flags=6]
[connection signal="trigger" from="Page" to="UI/DialogBox" method="show_dialog" binds= [ "You have found the first page player! The world grows!" ]]
[connection signal="trigger" from="Page" to="FoliageSpawner" method="grow"]
[connection signal="trigger" from="Page2" to="UI/DialogBox" method="show_dialog" binds= [ "The second page has been taken by you. Well done!" ]]
